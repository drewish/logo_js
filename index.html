<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>LOGO</title>
  <style type="text/css" media="screen">
    body {
      margin:0;
      padding:0;
      overflow:hidden;
    }
    #canvas {
      width: 50%;
      height: 100%;
      float: left;
    }
    #console {
      float: left;
    }
    #console form, #console textarea {
      width: 100%;
      height: 90%;
    }
  </style>
</head>
<body>
  <svg xmlns="http://www.w3.org/2000/svg" id="canvas" align="xMidYMid" viewBox="0 0 500 500" >
    <!-- Positive X is to the right; positive Y is up. -->
    <g id="slate" transform="translate(250,250) scale(1,-1)">
      <circle id="origin" cx='0' cy='0' r='3' fill='gainsboro' stroke='lightgray' />
      <path id="turtle" d="M 00 15 L 5 0 L -5 0 z" fill="gainsboro" stroke="dimgray" stroke-width="1" />
    </g>
  </svg>
  <div id="console">
    <form>
      <textarea id="program">; Configure the number of bands to draw.
Make "radius 6
Make "count 0
CS
Repeat :radius [
  Make "segs :count
  SetPenColour SUM :count 1
  Repeat 6 [
    Repeat :segs [
      Repeat 2 [ Forward 20 Right 60 ]
      Forward 20
      PenUp Back 20 PenDown
      Left 120
    ]
    Forward 20 Right 60
  ]
  ; Move out to the next band.
  PenUp Left 120 Repeat 2 [ Forward 20 Right 60 ] PenDown
  Make "count SUM :count 1
]
      </textarea>
      <a id="run" href="#">Run</a>
    <form>
  </div>
  <script src="logo.js" type="text/javascript" charset="utf-8"></script>
  <script>
    (function () {
      var con = document.getElementById('console');

      con.style.width = window.innerWidth / 2 + "px";
      con.style.height = window.innerHeight + "px";

      // This is a hacky first attempt at pulling all the rendering code out of
      // the logo library.
      var path;
      function updateTurtle(x, y, angle) {
        // Headings (angles) are measured in degrees clockwise from the positive Y
        // axis.
        var transform = 'translate(' + x + ',' + y +') rotate(' + -angle + ')';
        document.getElementById('turtle').setAttribute('transform', transform);
      }
      function createPath(x, y, color) {
        path = document.createElementNS("http://www.w3.org/2000/svg","path");
        path.classList.add('trail');
        path.setAttribute('d', 'M ' + this.x + ',' + this.y);
        path.setAttribute('fill', 'none');
        path.setAttribute('stroke', this.color);
        path.setAttribute('stroke-width', 2);
        document.getElementById('slate').appendChild(path);
      }
      function addToPath(dx, dy) {
        if (path) {
          path.setAttribute('d', path.getAttribute('d') + ' l ' + dx + ',' + dy);
        }
      }
      function endPath() {
        path = null;
      }
      var logo = new Logo(updateTurtle, createPath, addToPath, endPath);

      document.getElementById('run').addEventListener('click', function(e) {
        e.preventDefault();
        logo.runInput(document.getElementById('program').value);
      }, false);
    })();
  </script>
</body>
</html>
